<script lang="ts">
  import clientAuth from "$lib/auth";

  let { data } = $props();
</script>

<div class="tabs tabs-lift m-3">
  <label class="tab">
    <input type="radio" name="my_tabs" checked={true} />
    ğŸš€ ä½¿ç”¨ Gel Auth BuiltinUI
  </label>
  <div class="tab-content bg-base-100 border-base-300 p-6">
    <blockquote>
      æŒ‰ç…§é¡¹ç›® <a
        href="https://github.com/lonexw/svelte-gel-auth-teamplate/README.md"
        class="btn-link">ğŸ“– README</a
      > çš„æŒ‡å¯¼, æ­£å¸¸è¿æ¥ Gel æ•°æ®åº“å¹¶åˆå§‹åŒ– Auth é…ç½®å, å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ Gel Auth
      çš„å†…ç½® UI ç»„ä»¶.
    </blockquote>
    <p>
      åœ¨ <strong>src/hooks.server.ts</strong> æ–‡ä»¶ä¸­æˆ‘ä»¬åšä¸¤ä»¶äº‹æƒ…, é¦–å…ˆå°† auth ä¿¡æ¯åŠ å…¥åˆ°æ‰€æœ‰è¯·æ±‚ä¸­:
    </p>
    <p>
      <img
        class="h-50"
        src="https://phab-xyz-1255747930.cos.ap-beijing.myqcloud.com/snippets/code_step_1.png"
        alt="code-step-1"
      />
    </p>

    <p>å¹¶é…ç½® auth ç›¸å…³çš„ callback è·¯ç”±, å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚å®ç°ä¸šåŠ¡é€»è¾‘(åœ¨æ³¨å†ŒæˆåŠŸåå°†ç”¨æˆ·å’Œ identity_id è¿›è¡Œç»‘å®š):</p>
    <p>
      <img
        class="h-50"
        src="https://phab-xyz-1255747930.cos.ap-beijing.myqcloud.com/snippets/code_step_2.png"
        alt="code-step-2"
      />
    </p>
    <p>
      ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥ <strong>src/lib/clientAuth.ts</strong> æä¾›çš„æ–¹æ³•è·³è½¬ç™»é™†å…¥å£:
    </p>
    <p>
      <a
        href={clientAuth.getBuiltinUIUrl()}
        class="btn btn-link"
        data-sveltekit-reload>ç™»å…¥ clientAuth.getBuiltinUIUrl()</a
      >
      |
      <a
        href={clientAuth.getBuiltinUISignUpUrl()}
        class="btn btn-link"
        data-sveltekit-reload>æ³¨å†Œ clientAuth.getBuiltinUISignUpUrl()</a
      >
      |
      <a
        href={clientAuth.getSignoutUrl()}
        class="btn btn-link"
        data-sveltekit-reload>ç™»å‡º clientAuth.getSignoutUrl()</a
      >
    </p>
  </div>

  <label class="tab">
    <input type="radio" name="my_tabs" />
    ğŸ› ï¸ å®šåˆ¶ Auth UI
  </label>
  <div class="tab-content bg-base-100 border-base-300 p-6">
    å¯ä»¥ç›´æ¥æŸ¥è¯¢æ•°æ®åº“æ¥ç¡®è®¤å†…ç½® UI æ˜¯å¦å·²ç»å¯ç”¨:
    <pre><code>
# *.server.ts
const session = locals.auth.session
const builtinUIEnabled = await session.client.queryRequiredSingle<boolean
          >(`select exists ext::auth::UIConfig`)
    </boolean></code
      ></pre>
    <p>åœ¨ <strong>src/routes/auth</strong> ç›®å½•ä¸­å®šä¹‰éœ€è¦çš„è·¯ç”±:</p>
    <ul class="list-disc pl-4">
      <li>
        <a href="/auth/signin" class="btn-link" data-sveltekit-reload
          >ç™»å…¥ /auth/signin</a
        >
      </li>
      <li>
        <a href="/auth/signup" class="btn-link" data-sveltekit-reload
          >æ³¨å†Œ /auth/signup</a
        >
      </li>
      <li>
        <a href="/auth/forgot-password" class="btn-link" data-sveltekit-reload
          >å¿˜è®°å¯†ç  /auth/forgot-password</a
        >
      </li>
      <li>
        <a href="/auth/reset-password" class="btn-link" data-sveltekit-reload
          >é‡ç½®å¯†ç  /auth/reset-password</a
        >
      </li>
      <li>
        <form action="/auth/signout" method="post">
          <button
            class="btn btn-outline"
            type="submit"
          >
            ç™»å‡º POST /auth/signout
          </button>
        </form>
      </li>
    </ul>
    <p>
      å…·ä½“çš„ä»£ç å®ç°å¯ä»¥å‚ç…§è¿™äº›æ–‡ä»¶å†…çš„å®ç°, <a
        href="https://zaizhao.github.io/core/gel/auth.html"
        class="link">å¸®åŠ©æ–‡æ¡£ ğŸ“„</a
      >
    </p>

    <div class="divider"></div>
    <h5>é«˜çº§åŠŸèƒ½: å®ç°æ‰‹æœºå·ç éªŒè¯æˆ–æ‰«ç éªŒè¯</h5>
    <p><small>[æ–‡æ¡£å¾…æ•´ç†]</small></p>
  </div>

  <label class="tab">
    <input type="radio" name="my_tabs" />
    ğŸ‰ ä¸‹ä¸€æ­¥
  </label>
  <div class="tab-content bg-base-100 border-base-300 p-6">
    <p>æˆ‘ä»¬å…ˆç”¨ä¸€ä¸ªèµ„æºç¤ºä¾‹æ¥æ¼”ç¤ºä¸€ä¸‹ Auth å’Œ Access Policy å¦‚ä½•ä½¿ç”¨:</p>
  </div>
</div>

<style>
  .tab-content p {
    margin: 1rem 0;
  }
</style>
